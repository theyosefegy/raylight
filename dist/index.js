(()=>{"use strict";const t=new Map([["bold",{fontWeight:"900"}],["italic",{fontStyle:"italic"}],["strikethrough",{textDecoration:"line-through"}],["underline",{textDecoration:"underline"}],["highlight",{background:"red"}]]);class e{constructor(t){this.title=t,this.element=this.createElement(),this.panel=void 0}createElement(){const e=document.createElement("button");e.classList.add("panelbtn");const n=t.get(this.title.toLowerCase());return e.innerHTML=n?this.title[0].toUpperCase():"Unknown",n&&Object.assign(e.style,n),e.addEventListener("click",(()=>{var t;const e=window.getSelection();if(!e)return;const n=e.getRangeAt(0);null===(t=this.panel)||void 0===t||t.hide(),e.collapse(document.body),this.handle(n)})),e}handle(t){}}class n extends e{constructor(t){super(t)}handle(e){const n=t.get(this.title.toLowerCase());e&&n&&function(t,e){const n=document.createElement("span");n.classList.add("raystyle"),e&&Object.assign(n.style,e),t.surroundContents(n)}(e,n)}}const i=new class{constructor(){this.container=this.createContainer(),document.body.appendChild(this.container)}createContainer(){const t=document.createElement("div");return t.classList.add("raypanel"),t}hide(){this.container.style.display="none"}show(){const t=window.getSelection();if(!t||(null==t?void 0:t.isCollapsed))return;const e=t.getRangeAt(0).getClientRects();if(!e.length)return;const n=t.anchorOffset<=t.focusOffset,i=n?e[e.length-1]:e[0],s=n?i.right-(parseFloat(this.container.style.width)||65)/2:i.left,o=i.top-i.height-20;this.container.style.left=`${s+window.scrollX}px`,this.container.style.top=`${o+window.scrollY}px`,this.container.style.display="flex"}add(...t){const e=document.createDocumentFragment();t.forEach((t=>{t.panel=this,e.appendChild(t.element)})),this.container.appendChild(e)}remove(t){this.container.removeChild(t.element)}},s=new n("bold"),o=new n("Italic"),c=new n("underline"),l=new n("strikethrough"),a=new n("highlight");i.add(s,o,c,l,a),document.addEventListener("keydown",(t=>{t.shiftKey&&i.show()})),document.addEventListener("click",(t=>{i.container.contains(t.target)||i.hide()}))})();